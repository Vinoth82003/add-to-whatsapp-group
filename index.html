<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Add participants to WhatsApp group</title>
    <style>
      body {
  font-family: Arial, sans-serif;
}

form {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  margin: 50px;
}

label, input {
  margin: 10px 0;
}

button {
  margin-top: 20px;
  padding: 10px 20px;
  font-size: 16px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #3e8e41;
}

    </style>
  </head>
  <body>
    <form>
      <label for="group-id">Group ID:</label>
      <input type="text" id="group-id" name="group-id" required><br>

      <label for="participant-number">Participant number:</label>
      <input type="text" id="participant-number" name="participant-number" required><br>

      <button type="submit">Add participant</button>
    </form>

    <script src="//media.twiliocdn.com/sdk/js/chat/v4.0/twilio-chat.min.js"></script>
    <script>
// Get form and input elements
const form = document.querySelector('form');
const groupIdInput = document.getElementById('group-id');
const participantNumberInput = document.getElementById('participant-number');

// Initialize Twilio Chat API
const chatClient = new Twilio.Chat.Client(apiKey, apiSecret, { region: 'us1' });

// Handle form submission
form.addEventListener('submit', (event) => {
  event.preventDefault();

  // Get group ID and participant number from form inputs
  const groupId = groupIdInput.value;
  const participantNumber = participantNumberInput.value;

  // Get or create the channel
  chatClient.getPublicChannelDescriptors()
    .then(descriptors => {
      let channelDescriptor = descriptors.find(descriptor => descriptor.friendlyName === groupId);

      if (!channelDescriptor) {
        return chatClient.createChannel({ uniqueName: groupId, friendlyName: groupId, isPrivate: false })
          .then(channel => channelDescriptor = { sid: channel.sid, friendlyName: channel.friendlyName });
      }

      return channelDescriptor;
    })
    .then(channelDescriptor => {
      // Add participant to group
      return chatClient.getChannelBySid(channelDescriptor.sid)
        .then(channel => channel.add(participantNumber))
        .then(() => {
          console.log('Participant added successfully');
          // Reset form
          form.reset();
        });
    })
    .catch(error => {
      console.error('Failed to add participant:', error);
    });
});


    </script>
  </body>
</html>
